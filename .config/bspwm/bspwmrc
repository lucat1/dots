#!/bin/fish

if ! pgrep -x "sxhkd" > /dev/null
  SXHKD_SHELL=bash sxhkd &
end

if ! pgrep -x "picom" > /dev/null
  picom --experimental-backends --config $HOME/.config/picom.conf &
end

if ! pgrep -x "dunst" > /dev/null
  dunst &
end

if ! pgrep -x "xob" > /dev/null
  # volume / brightness "progress-like" bar pipe
  # obtained with xob
  if [ -p "/tmp/xob" ]; then
    rm /tmp/xob
  end 
  mkfifo /tmp/xob

  tail -f /tmp/xob | xob &
end


if pgrep -x "lemonbar" > /dev/null
  killall lemonbar 
end
$HOME/.bin/leftbar &
$HOME/.bin/rightbar &

if test -d "/sys/class/power_supply/BAT0" 
  $HOME/.bin/batterybar &
end

# brightness and volume default values
if command -v xbacklight
  xbacklight -set 25
end

if command -v pamixer
  pamixer --set-volume 25
end

xset r rate 400 60
xsetroot -cursor_name left_ptr

if test -f "$HOME/.config/wallpaper.jpg"
  hsetroot -cover "$HOME/.config/wallpaper.jpg"
else
    hsetroot -solid "#C3C3C3"
end

bspc monitor -d 1 2 3 4

bspc config border_width         1
bspc config normal_border_color   "#928374"
bspc config active_border_color   "#A89984"
bspc config window_gap           30 
bspc config split_ratio          0.50
bspc config top_padding          50

bspc config borderless_monocle   true
#bspc config single_monocle       true

bspc config gapless_monocle      true
# make all the windows floating by default
bspc rule -a "*" state=floating

# force windows on given screens
bspc rule -a "Chromium" desktop=^1 state=tiled
