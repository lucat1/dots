pkgname=dmenu-fork
pkgver=master
pkgrel=1
pkgdesc='Generic menu for X'
url='https://tools.suckless.org/dmenu/'
arch=('x86_64')
license=('MIT')
depends=('sh' 'libxinerama' 'libxft' 'freetype2')
source=("https://dl.suckless.org/tools/dmenu-4.9.tar.gz" "dmenu.c" "config.h" "dmenu_run")

prepare() {
  cd dmenu-4.9
  cp ../config.h .
  cp ../dmenu.c .
  echo "CPPFLAGS+=${CPPFLAGS}" >> config.mk
  echo "CFLAGS+=${CFLAGS}" >> config.mk
  echo "LDFLAGS+=${LDFLAGS}" >> config.mk
}

build() {
  cd dmenu-4.9
  make \
	  X11INC=/usr/include/X11 \
	  X11LIB=/usr/lib/X11 \
	  FREETYPEINC=/usr/include/freetype2
}

package() {
  cd dmenu-4.9
  cp ../dmenu_run .
  make PREFIX=/usr DESTDIR="${pkgdir}" install
  install -Dm 644 LICENSE -t "${pkgdir}/usr/share/licenses/dmenu"
}
md5sums=('9a537ec9a3a2ce9f08963d66b56cc030'
         'dd6baffe413fd39fafd91d49060ba869'
         '9213f506d19adbd4ca718390fc8b74ec'
         'ce0176adc46eb093735cadb717ad3753')
